<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="lemon_milk/fivecon.png" type="image/x-icon">
    <link rel="stylesheet" href="style.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@500&display=swap');
      </style>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <title>REDEFINIR QRCODE</title>
</head>
<body>
       <div class="di">
            <h1>Restaurar QRCODE do AppControler</h1>
            <form id="for" method="get">
                <label for="nome">Informe o seu DE ou TR:</label>
                <input type="text" name="DE" id="DE" maxlength="9" placeholder="coloque o seu DE aqui">
                <button type="button" class="btn" onclick="receber_dado()">ENVIAR</button>
            </form> 
       </div>

       <script>
        const form = document.getElementById('for')
        form.addEventListener('submit', e => {
        e.preventDefault()
        console.log('Deu certo')
        })
        function receber_dado(){
            
            const de = document.getElementById('DE').value;
          
            const qualquernome =  'http://127.0.0.1:5000/api/exemplo?DE=' + de;


            fetch(qualquernome)
                .then(response => response.json())
                .then(data => {
                    console.log('Resposta da API:', data);
                    swal({
                        title: data.title,
                        text: data.text,
                        icon: data.icon
                    });
                })
                .catch(error => swal({
                     text: 'API não iniciada',
                     icon:"warning",
                     title: "Bot não iniciado"
                }));
        }

       </script>
</body>

</html>
